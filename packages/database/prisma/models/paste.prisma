model Paste {
  id   String   @id @db.Char(8)
  time DateTime @db.Timestamp(0)

  user      User            @relation(fields: [userId], references: [id])
  userId    Int
  snapshots PasteSnapshot[]

  @@index([userId])
}

model PasteSnapshot {
  paste   Paste  @relation(fields: [pasteId], references: [id])
  pasteId String @db.Char(8)

  public Boolean
  data   String?

  capturedAt DateTime @db.Timestamp(0)
  lastSeenAt DateTime @db.Timestamp(0)

  @@id([pasteId, capturedAt])
  @@index([pasteId, capturedAt(sort: Desc)])
}
