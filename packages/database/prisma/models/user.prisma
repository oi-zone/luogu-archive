model User {
  id        Int            @id
  snapshots UserSnapshot[]

  activities     Activity[]
  articles       Article[]
  articleReplies ArticleReply[]
  pastes         Paste[]
  judgements     Judgement[]
  postSnapshots  PostSnapshot[]
  replies        Reply[]

  postTakedowns     PostTakedown[]
  replyTakedowns    ReplyTakedown[]
  activityTakedowns ActivityTakedown[]
}

model UserSnapshot {
  user   User @relation(fields: [userId], references: [id])
  userId Int

  name       String
  slogan     String
  badge      String?
  isAdmin    Boolean
  isBanned   Boolean
  isRoot     Boolean
  color      Color
  ccfLevel   Int
  xcpcLevel  Int
  background String

  capturedAt DateTime @db.Timestamp(0)
  lastSeenAt DateTime @db.Timestamp(0)

  @@id([userId, capturedAt])
  @@index([userId])
  @@index([userId, capturedAt(sort: Desc)])
}

enum Color {
  Cheater
  Gray
  Blue
  Green
  Orange
  Red
  Purple
}
